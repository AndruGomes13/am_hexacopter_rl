<mujoco model="Hexcopter">
  <compiler autolimits="true" assetdir="assets" />


  <default>
    <default class="hex">
      <geom mass="0" />
      <motor ctrlrange="0 46.17" />
      <mesh scale="0.01 0.01 0.01" />
      <default class="visual">
        <geom group="2" type="mesh" contype="0" conaffinity="0" />
      </default>
      <default class="collision">
        <geom group="3" type="box" contype="0" conaffinity="0" />
        <default class="rotor">
          <geom type="ellipsoid" size=".13 .13 .01" contype="0" conaffinity="0" />
        </default>
      </default>
      <site group="5" />
    </default>
  </default>

  <asset>
    <texture type="2d" file="{{base_dir}}/assets/X2_lowpoly_texture_SpinningProps_1024.png" />
    <material name="phong3SG" texture="X2_lowpoly_texture_SpinningProps_1024" />
    <material name="invisible" rgba="0 0 0 0" />

    <mesh class="hex" file="{{base_dir}}/assets/X2_lowpoly.obj" />
  </asset>

  <worldbody>
    <light name="spotlight" mode="targetbodycom" target="hex" pos="0 -1 2" />


    <body name="hex" pos="0 0 -0.02" childclass="hex">
      <joint name="drone_free_joint" type="free" />
      <camera name="track" pos="-1 0 .5" xyaxes="0 -1 0 1 0 2" mode="trackcom" />


      <!-- <inertial
        mass="0.75"
        diaginertia="0.002410 0.001800 0.003759"
        pos="0 0 .02"
        quat="1 0 0 0"
      /> -->
      <inertial
        mass="5.665"
        diaginertia="0.2586 0.2865 0.4684"
        pos="0 0 .02"
        quat="1 0 0 0"
      />

      <site name="imu" pos="0 0 .02" />
      <geom material="phong3SG" mesh="X2_lowpoly" class="visual" quat="0 0 1 1" />

      <!-- <geom class="collision" size=".06 .027 .02" pos=".04 0 .02" />
      <geom class="collision" size=".06 .027 .02" pos=".04 0 .06" />
      <geom class="collision" size=".05 .027 .02" pos="-.07 0 .065" />
      <geom class="collision" size=".023 .017 .01" pos="-.137 .008 .065" quat="1 0 0 1" /> -->

      <!-- Red cylinder along X-axis -->
      <geom class='visual' type="cylinder" size="0.01 0.1" rgba="1 0 0 1"
          pos="0.1 0 0" quat="0.7071 0 0.7071 0" />

      <!-- Green cylinder along Y-axis -->
      <geom class='visual' type="cylinder" size="0.01 0.1" rgba="0 1 0 1"
            pos="0 0.1 0" quat="0.7071 -0.7071 0 0" />
      <!-- Rotors -->
       <!-- TODO: Add real params -->
      <geom name="rotor1" type="cylinder" size="0.08 0.01"
            pos="-0.02885 -0.36700 -0.05993"
            quat="0.0000  0.2589  0.0000  0.9659"
            mass="0" />

      <geom name="rotor2" type="cylinder" size="0.08 0.01"
            pos="-0.02885  0.36700 -0.05993"
            quat="0.9659  0.0000  0.2589  0.0000"
            mass="0" />

      <geom name="rotor3" type="cylinder" size="0.08 0.01"
            pos=" 0.33196  0.15903 -0.05993"
            quat="0.8365 -0.1294 -0.2241 -0.4830"
            mass="0" />

      <geom name="rotor4" type="cylinder" size="0.08 0.01"
            pos="-0.30371 -0.20797 -0.05993"
            quat="0.4830 -0.2241  0.1294  0.8365"
            mass="0" />

      <geom name="rotor5" type="cylinder" size="0.08 0.01"
            pos=" 0.33196 -0.15903 -0.05993"
            quat="0.4830  0.2241  0.1294 -0.8365"
            mass="0" />

      <geom name="rotor6" type="cylinder" size="0.08 0.01"
            pos="-0.30371  0.20797 -0.05993"
            quat="0.8365  0.1294 -0.2241  0.4830"
            mass="0" />


      <site name="thrust1"
            pos="-0.02885 -0.36700 -0.05993"
            quat="0.0000  0.2589  0.0000  0.9659" />

      <site name="thrust2"
            pos="-0.02885  0.36700 -0.05993"
            quat="0.9659  0.0000  0.2589  0.0000" />

      <site name="thrust3"
            pos=" 0.33196  0.15903 -0.05993"
            quat="0.8365 -0.1294 -0.2241 -0.4830" />

      <site name="thrust4"
            pos="-0.30371 -0.20797 -0.05993"
            quat="0.4830 -0.2241  0.1294  0.8365" />

      <site name="thrust5"
            pos=" 0.33196 -0.15903 -0.05993"
            quat="0.4830  0.2241  0.1294 -0.8365" />

      <site name="thrust6"
            pos="-0.30371  0.20797 -0.05993"
            quat="0.8365  0.1294 -0.2241  0.4830" />


      <!-- Mesh -->
      <geom size=".16 .04 .02" pos="0 0 0.02" type="ellipsoid" mass="0" class="visual"
        material="invisible" />

    </body>

  </worldbody>

  <!-- TODO: Add real params -->
  <actuator>
    <motor class="hex" name="thrust1" site="thrust1" gear="0 0 1 0 0  0.06" />
    <motor class="hex" name="thrust2" site="thrust2" gear="0 0 1 0 0 -0.06" />
    <motor class="hex" name="thrust3" site="thrust3" gear="0 0 1 0 0  0.06" />
    <motor class="hex" name="thrust4" site="thrust4" gear="0 0 1 0 0 -0.06" />
    <motor class="hex" name="thrust5" site="thrust5" gear="0 0 1 0 0  0.06" />
    <motor class="hex" name="thrust6" site="thrust6" gear="0 0 1 0 0 -0.06" />
  </actuator>

  <sensor>
    <gyro name="body_gyro" site="imu" />
    <accelerometer name="body_linacc" site="imu" />
    <framequat name="body_quat" objtype="site" objname="imu" />
    <framepos name="body_pos" objtype="site" objname="imu" />
    <framelinvel name="body_linvel" objtype="site" objname="imu" />
    <frameangvel name="body_angvel" objtype="site" objname="imu" />
  </sensor>

  <!-- <keyframe>
    <key name=" hover" qpos=" 0 0 .3 1 0 0 0" ctrl=" 3.2495625 3.2495625 3.2495625 3.2495625" />
  </keyframe> -->
</mujoco>